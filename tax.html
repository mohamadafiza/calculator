<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Cukai LHDN 2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .content {
            padding: 25px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .relief-section {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .relief-section h3 {
            color: #667eea;
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .relief-section h3::before {
            content: "üí∞";
            margin-right: 8px;
        }

        .result-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .result-item:last-child {
            border-bottom: none;
            font-size: 20px;
            font-weight: bold;
            padding-top: 15px;
        }

        .result-label {
            font-size: 14px;
        }

        .result-value {
            font-weight: 600;
        }

        .tax-breakdown {
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .tax-breakdown h3 {
            color: #667eea;
            font-size: 16px;
            margin-bottom: 15px;
            text-align: center;
        }

        .bracket {
            background: #f8f9ff;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
        }

        .bracket-header {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            margin-bottom: 5px;
            font-weight: 600;
            color: #667eea;
        }

        .bracket-detail {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .bracket-tax {
            font-weight: bold;
            color: #f5576c;
            font-size: 14px;
            margin-top: 5px;
        }

        .info-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 13px;
            color: #856404;
        }

        .currency {
            color: rgba(255,255,255,0.8);
            font-size: 12px;
        }

        @media (max-width: 480px) {
            .container {
                border-radius: 0;
            }

            body {
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üßÆ Kalkulator Cukai LHDN</h1>
            <p>Tahun Taksiran 2025</p>
        </div>

        <div class="content">
            <div class="input-group">
                <label>üìä Pendapatan Tahunan (RM)</label>
                <input type="number" id="income" placeholder="Contoh: 60000" value="0">
            </div>

            <div class="relief-section">
                <h3>Pelepasan Cukai</h3>

                <div class="input-group">
                    <label>üë§ Pelepasan Individu (RM 9,000)</label>
                    <input type="number" id="individual" value="9000" readonly style="background: #f0f0f0;">
                </div>

                <div class="input-group">
                    <label>üíë Pelepasan Pasangan (RM 4,000)</label>
                    <input type="number" id="spouse" placeholder="0" value="0">
                </div>

                <div class="input-group">
                    <label>üë∂ Pelepasan Anak (RM)</label>
                    <input type="number" id="children" placeholder="0" value="0">
                </div>

                <div class="input-group">
                    <label>üè• Insurans Nyawa & EPF (RM)</label>
                    <input type="number" id="insurance" placeholder="Maksimum 7,000" value="0">
                </div>

                <div class="input-group">
                    <label>üìö Pendidikan & Perubatan (RM)</label>
                    <input type="number" id="education" placeholder="0" value="0">
                </div>

                <div class="input-group">
                    <label>üè† Pelepasan Lain (RM)</label>
                    <input type="number" id="others" placeholder="0" value="0">
                </div>
            </div>

            <div class="result-section">
                <div class="result-item">
                    <span class="result-label">Pendapatan Tahunan</span>
                    <span class="result-value" id="totalIncome">RM 0.00</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Jumlah Pelepasan</span>
                    <span class="result-value" id="totalRelief">RM 0.00</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Pendapatan Bercukai</span>
                    <span class="result-value" id="chargeableIncome">RM 0.00</span>
                </div>
                <div class="result-item">
                    <span class="result-label">üíµ CUKAI PERLU DIBAYAR</span>
                    <span class="result-value" id="totalTax">RM 0.00</span>
                </div>
            </div>

            <div class="tax-breakdown">
                <h3>üìã Pecahan Pengiraan Cukai</h3>
                <div id="breakdownDetails"></div>
            </div>

            <div class="info-box">
                <strong>‚ÑπÔ∏è Nota:</strong> Pengiraan ini adalah anggaran berdasarkan kadar cukai LHDN 2025. Sila rujuk kepada LHDN untuk maklumat lanjut dan pelepasan tambahan yang mungkin layak.
            </div>
        </div>
    </div>

    <script>
        // Tangga cukai LHDN 2025 (Individu Pemastautin)
        const taxBrackets = [
            { min: 0, max: 5000, rate: 0, fixed: 0 },
            { min: 5001, max: 20000, rate: 1, fixed: 0 },
            { min: 20001, max: 35000, rate: 3, fixed: 150 },
            { min: 35001, max: 50000, rate: 8, fixed: 600 },
            { min: 50001, max: 70000, rate: 13, fixed: 1800 },
            { min: 70001, max: 100000, rate: 21, fixed: 4400 },
            { min: 100001, max: 250000, rate: 24, fixed: 10700 },
            { min: 250001, max: 400000, rate: 24.5, fixed: 46700 },
            { min: 400001, max: 600000, rate: 25, fixed: 83450 },
            { min: 600001, max: 1000000, rate: 26, fixed: 133450 },
            { min: 1000001, max: 2000000, rate: 28, fixed: 237450 },
            { min: 2000001, max: Infinity, rate: 30, fixed: 517450 }
        ];

        // Get all input elements
        const inputs = {
            income: document.getElementById('income'),
            individual: document.getElementById('individual'),
            spouse: document.getElementById('spouse'),
            children: document.getElementById('children'),
            insurance: document.getElementById('insurance'),
            education: document.getElementById('education'),
            others: document.getElementById('others')
        };

        // Add event listeners to all inputs
        Object.values(inputs).forEach(input => {
            input.addEventListener('input', calculateTax);
        });

        function calculateTax() {
            // Get values
            const income = parseFloat(inputs.income.value) || 0;
            const individual = parseFloat(inputs.individual.value) || 0;
            const spouse = parseFloat(inputs.spouse.value) || 0;
            const children = parseFloat(inputs.children.value) || 0;
            const insurance = parseFloat(inputs.insurance.value) || 0;
            const education = parseFloat(inputs.education.value) || 0;
            const others = parseFloat(inputs.others.value) || 0;

            // Calculate total relief
            const totalRelief = individual + spouse + children + insurance + education + others;

            // Calculate chargeable income
            const chargeableIncome = Math.max(0, income - totalRelief);

            // Calculate tax with breakdown
            const { totalTax, breakdown } = calculateTaxWithBreakdown(chargeableIncome);

            // Update display
            document.getElementById('totalIncome').textContent = formatCurrency(income);
            document.getElementById('totalRelief').textContent = formatCurrency(totalRelief);
            document.getElementById('chargeableIncome').textContent = formatCurrency(chargeableIncome);
            document.getElementById('totalTax').textContent = formatCurrency(totalTax);

            // Update breakdown
            displayBreakdown(breakdown, chargeableIncome);
        }

        function calculateTaxWithBreakdown(chargeableIncome) {
            let totalTax = 0;
            let breakdown = [];
            let remainingIncome = chargeableIncome;

            for (let i = 0; i < taxBrackets.length; i++) {
                const bracket = taxBrackets[i];

                if (remainingIncome <= 0) break;
                if (chargeableIncome < bracket.min) break;

                const taxableInBracket = Math.min(
                    remainingIncome,
                    bracket.max - bracket.min + 1
                );

                const taxForBracket = (taxableInBracket * bracket.rate) / 100;

                if (taxableInBracket > 0) {
                    breakdown.push({
                        range: `RM ${formatNumber(bracket.min)} - RM ${bracket.max === Infinity ? '‚àû' : formatNumber(bracket.max)}`,
                        rate: bracket.rate,
                        taxableAmount: taxableInBracket,
                        tax: taxForBracket
                    });

                    totalTax += taxForBracket;
                    remainingIncome -= taxableInBracket;
                }
            }

            return { totalTax, breakdown };
        }

        function displayBreakdown(breakdown, chargeableIncome) {
            const container = document.getElementById('breakdownDetails');

            if (chargeableIncome === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">Tiada cukai perlu dibayar</p>';
                return;
            }

            let html = '';
            breakdown.forEach((item, index) => {
                html += `
                    <div class="bracket">
                        <div class="bracket-header">
                            <span>Tangga ${index + 1}: ${item.range}</span>
                            <span>${item.rate}%</span>
                        </div>
                        <div class="bracket-detail">
                            Pendapatan dalam tangga: RM ${formatNumber(item.taxableAmount)}
                        </div>
                        <div class="bracket-detail">
                            Pengiraan: RM ${formatNumber(item.taxableAmount)} √ó ${item.rate}% = <span class="bracket-tax">RM ${formatNumber(item.tax)}</span>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function formatCurrency(amount) {
            return 'RM ' + amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
        }

        function formatNumber(num) {
            return num.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
        }

        // Initial calculation
        calculateTax();
    </script>
</body>
</html>
